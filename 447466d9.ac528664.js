(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{148:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return d}));var r=n(2),a=n(9),o=(n(0),n(177)),i={id:"nginx",title:"NGINX",sidebar_label:"NGINX"},c={id:"code_doc/ssl/nginx",title:"NGINX",description:"A quick word about NGINX. NGINX is running on port 80 and 443 and redirects to the node.js server. In the case of port 80 it redirects to 443 which has SSL. The config file for NGINX is under /etc/nginx/sites-available with a symbolic link to /etc/nginx/sites-enabled. The symbolic link was made with",source:"@site/docs/code_doc/ssl/nginx.md",permalink:"/Coastal-Image-Labeler/docs/code_doc/ssl/nginx",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/code_doc/ssl/nginx.md",sidebar_label:"NGINX",sidebar:"docs",previous:{title:"Adding Images to DB",permalink:"/Coastal-Image-Labeler/docs/code_doc/cli/addImages"},next:{title:"Certbot",permalink:"/Coastal-Image-Labeler/docs/code_doc/ssl/certbot"}},l=[{value:"NGINX Commands",id:"nginx-commands",children:[{value:"Test config",id:"test-config",children:[]},{value:"Reload (needed after any change)",id:"reload-needed-after-any-change",children:[]}]}],s={rightToc:l};function d(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"A quick word about NGINX. NGINX is running on port 80 and 443 and redirects to the node.js server. In the case of port 80 it redirects to 443 which has SSL. The config file for NGINX is under ",Object(o.b)("inlineCode",{parentName:"p"},"/etc/nginx/sites-available")," with a symbolic link to ",Object(o.b)("inlineCode",{parentName:"p"},"/etc/nginx/sites-enabled"),". The symbolic link was made with"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash",metastring:'title="Symbolic link"',title:'"Symbolic','link"':!0}),"sudo ln -s /etc/nginx/sites-available/coast /etc/nginx/sites-enabled/coast\n")),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cpp",metastring:'title="/etc/nginx/sites-available/coast NGINX"',title:'"/etc/nginx/sites-available/coast','NGINX"':!0}),"server {\n    # Error page\n    error_page 502 /custom_502.html;\n    location = /custom_502.html {\n            root /usr/share/nginx/html;\n            internal;\n    }\n        \n    # For all routes\n    location / {\n       proxy_pass http://localhost:4201; #whatever port your app runs on\n       proxy_http_version 1.1;\n       proxy_set_header Upgrade $http_upgrade;\n       proxy_set_header Connection 'upgrade';\n       proxy_set_header Host $host;\n       proxy_cache_bypass $http_upgrade;\n    }\n\n    server_name dev.coastalimagelabeler.science;\n} \n")),Object(o.b)("p",null,"This is all you have to type in for now. ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"./certbot"}),"Certbot")," will edit this file later based on the ",Object(o.b)("inlineCode",{parentName:"p"},"server_name")),Object(o.b)("p",null,"Make sure to put the ",Object(o.b)("inlineCode",{parentName:"p"},"custom_502.html")," under ",Object(o.b)("inlineCode",{parentName:"p"},"/usr/share/nginx/html"),"."),Object(o.b)("h2",{id:"nginx-commands"},"NGINX Commands"),Object(o.b)("h3",{id:"test-config"},"Test config"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash",metastring:'title="Testing file"',title:'"Testing','file"':!0}),"sudo nginx -t\n")),Object(o.b)("h3",{id:"reload-needed-after-any-change"},"Reload (needed after any change)"),Object(o.b)("p",null,"And then any changes requires a reload."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash",metastring:'title="Reloading changes"',title:'"Reloading','changes"':!0}),"sudo systemctl reload nginx\n")))}d.isMDXComponent=!0},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),d=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=d(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},u=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=d(n),u=r,m=p["".concat(i,".").concat(u)]||p[u]||b[u]||o;return n?a.a.createElement(m,c(c({ref:t},s),{},{components:n})):a.a.createElement(m,c({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var s=2;s<o;s++)i[s]=n[s];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);