---
id: database
title: Database Structure
sidebar_label: Database Structure
---


MongoDB is a NoSQL database. As such one of its features is that the entries in
the database do **NOT** have to follow a strict format (SQL entries must have
each column filled in). Structure can still be made with things called Object
Relation Models which is what Mongoose provides.

## Terminaology 

I will draw comparisions from MongoDB to SQL terms. Starting from the bottom,

- `Row` in SQL is called a `Document` in MongoDB.
  - For example we have a Document for image `P25959661.jpg`

- `Table` in SQL is called a `Collection` in MongoDB.
  - For example we have a Collection for all images

- `Schema` in SQL is a `Namespace` in MongoDB.
  - For example we have a Namespace called `dev` or one called `production`.

## Object Relation Models

These Object Relation Models (ORMs) help provide for a structure to the data by
allowing for type checking and having required/non required fields.

### Catalog

The Catalog object is the overarching model that contains the archives which in
turn contains the images. It also contains the questions that are applied to all
images of archives that are part of this catalog. This is the types of the
Catalog.

<!-- https://stackoverflow.com/questions/60827828/docusaurus-v2-collapsible-section-in-markdown -->
```js
export interface CatalogDocument extends Document {
    archives: any,
    catalogInfo?:any, //optional
    dateAdded?:Date, //optional
    name : string,
    path : string,
    taggable:Boolean,
    questionSet:Types.ObjectId
  }
```


#### Archives

These are subfolders of the Catalogs and is originally in place due to how the
NOAA images where downloaded. They serve no other purpose other then to group
images up and serve as a link between Catalogs and Images

```js
export interface ArchiveDocument extends Document {
  dateAdded?:Date,
  name : string,
  path : string,
  role: [Types.ObjectId],
  catalog:Types.ObjectId,
  taggable: Boolean,
  allImages?:any
}
```

### Images

The Image models most important fields are the `tags`, the `tillComplete` and
`taggable` fields.

```js
export interface ImageDocument extends Document {
    archive:Types.ObjectId,
    compressed?:boolean,
    dateAdded?:Date,
    finalTag?:Object,
    finishedTagging: boolean,
    location?:{
        upperLeft:[number],
        upperRight:[number],
        lowerLeft:[number],
        lowerRight:[number]
    },
    fileName :string,
    path : string,
    taggable:boolean,
    taggedTimes?:[Date],
    tags?:[Object],
    tillComplete:number
}
```

### Question Set

Of the current models, the question set is the only one that is **NOT** checked.
It serves simply as a guideline for admins to use. Due to this nature it is
**HIGHLY** reccomended to make sure the documents for Question Sets are correct
and is best to copy an existing one

```js
export interface QuestionSetDocument extends Document {
    name:string,
    description:string,
    questions:[any]
}
```

## Namespaces

As mentioned before Namespaces are like Schemas in SQL. Generally there are 2, a
dev namespace and a production namespace. For testing it is advised to create
your own namespace (Its the last part of the URI) as to not interfere with production data.