(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{103:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return b}));var a=n(2),i=n(6),r=(n(0),n(157)),o={id:"nodejs",title:"Node.js",sidebar_label:"Node.js"},c={id:"v3_plan/nodejs",title:"Node.js",description:"Endpoints",source:"@site/docs\\v3_plan\\nodejs.md",permalink:"/Coastal-Image-Labeler/docs/v3_plan/nodejs",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/v3_plan/nodejs.md",sidebar_label:"Node.js",sidebar:"v3Plan",previous:{title:"Next.js/React.js",permalink:"/Coastal-Image-Labeler/docs/v3_plan/nextjsreactjs"},next:{title:"Feature List",permalink:"/Coastal-Image-Labeler/docs/v3_plan/featurelist"}},l=[{value:"Endpoints",id:"endpoints",children:[{value:"User",id:"user",children:[]},{value:"Catalog",id:"catalog",children:[]},{value:"Archive",id:"archive",children:[]},{value:"Image",id:"image",children:[]},{value:"Question Sets",id:"question-sets",children:[]}]},{value:"Atomic Middlewares",id:"atomic-middlewares",children:[]},{value:"Mongoose Functions",id:"mongoose-functions",children:[]},{value:"Deployment",id:"deployment",children:[]},{value:"Logging",id:"logging",children:[]}],s={rightToc:l};function b(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"endpoints"},"Endpoints"),Object(r.b)("p",null,"The endpoints would still be structured the same way where they are grouped by\nwhat Mongoose model they interact with. In truth it probably would be best to\nbuild the frontend first as a skeleton then figure out the endpoints"),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"Generally wont use GET requests due to no body being passed and possible caching issues."))),Object(r.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"Still being worked on"))),Object(r.b)("h3",{id:"user"},"User"),Object(r.b)("h4",{id:"post"},"POST"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"getTaggableArchives"),Object(r.b)("li",{parentName:"ul"},"getTaggableCatalogs"),Object(r.b)("li",{parentName:"ul"},"getAssignedImages")),Object(r.b)("h3",{id:"catalog"},"Catalog"),Object(r.b)("h4",{id:"post-1"},"POST"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Get Catalogs")),Object(r.b)("h3",{id:"archive"},"Archive"),Object(r.b)("h4",{id:"post-2"},"POST"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Get Arhives")),Object(r.b)("h3",{id:"image"},"Image"),Object(r.b)("h4",{id:"post-3"},"POST"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Tag Image")),Object(r.b)("h3",{id:"question-sets"},"Question Sets"),Object(r.b)("h4",{id:"post-4"},"POST"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Get set info")),Object(r.b)("h2",{id:"atomic-middlewares"},"Atomic Middlewares"),Object(r.b)("p",null,"List of middlewares for endpoints"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"addMongoUser")," - Adds the information from the DB to the req for the next middleware to use."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"advancedResults")," - For general query with query params."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"asyncHandler")," - Wraps the function in a try catch."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"ensureAuthenticated")," - Ensures the user is logged in."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"authorize")," - Checks someones tags,passes if they have it."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"notAuthorize")," - Like above, but if they have it they cant go."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"ensureBody")," - Checks if body, if not dont go."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"partOfArchive")," - Checks if a user can interact with this archive."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"partOfCatalog")," - Checks if a user can interact with this catalog."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"imagePartOfArchive")," - Checks if an image is part of that archive."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"archivePartOfCatalog")," - Checks if an archive is part of that catalog."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"cycleImageOnToUser")," - Takes an image and puts it to the assigned list of a user."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"cycleImageOffUser")," - Takes an image off a user and puts it in tagged or somewhere else."),Object(r.b)("li",{parentName:"ol"},"Perhaps more?")),Object(r.b)("h2",{id:"mongoose-functions"},"Mongoose Functions"),Object(r.b)("p",null,"Use the on creation, on update and on delete functions to update catalogs on the number of archives and images, archives on the number of images, and images on the number of tags."),Object(r.b)("h2",{id:"deployment"},"Deployment"),Object(r.b)("p",null,"PM2 has better logging and resource management, and Lets Encrypt is just easier to use. Guide ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.youtube.com/watch?v=oykl1Ih9pMg"}),"here")),Object(r.b)("h2",{id:"logging"},"Logging"),Object(r.b)("p",null,"Logging would mainly be done by printing to the console, which then PM2 would then pick up and save."))}b.isMDXComponent=!0},157:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var a=n(0),i=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=i.a.createContext({}),b=function(e){var t=i.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},d=function(e){var t=b(e.components);return i.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},u=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=b(n),u=a,m=d["".concat(o,".").concat(u)]||d[u]||p[u]||r;return n?i.a.createElement(m,c(c({ref:t},s),{},{components:n})):i.a.createElement(m,c({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,o[1]=c;for(var s=2;s<r;s++)o[s]=n[s];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);